import {LIVE,auth,onAuthStateChanged,signOut} from '/firebase.js';const $=s=>document.querySelector(s),$$=(s)=>Array.from(document.querySelectorAll(s));let USER=null;function show(id){['catalog','mylearning','gradebook'].forEach(p=>$('#page-'+p).style.display=(p===id)?'':'none');}function initSidebar(){const sb=$('#sidebar');sb.addEventListener('mouseenter',()=>sb.classList.add('open'));sb.addEventListener('mouseleave',()=>sb.classList.remove('open'));$$('#sidebar .navbtn').forEach(b=>b.addEventListener('click',()=>show(b.dataset.goto)));}function initAuth(){const login=$('#btnLogin'),logout=$('#btnLogout');const apply=u=>{USER=u;login.style.display=u?'none':'inline-block';logout.style.display=u?'inline-block':'none'};if(LIVE){onAuthStateChanged(auth,apply);}else{apply(null);}logout.onclick=async()=>{try{await signOut(auth);}finally{location.reload();}}}document.addEventListener('DOMContentLoaded',()=>{initSidebar();initAuth();show('catalog');});