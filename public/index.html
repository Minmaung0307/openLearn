<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>OpenLearn Lite</title>
  <link rel="manifest" href="/manifest.json"/>
  <link rel="icon" href="/icons/icon-192.png"/>
  <link rel="stylesheet" href="/styles.css"/>
</head>
<body>
<header id="topbar">
  <div class="row">
    <button id="btn-burger" class="btn" aria-label="Menu">☰</button>
    <div id="logo">🎓 OpenLearn</div>
    <input id="topSearch" placeholder="Search courses..."/>
    <div class="grow"></div>
    <button class="btn" id="btn-login">Login</button>
    <button class="btn" id="btn-logout" style="display:none">Logout</button>
  </div>
</header>

<aside id="sidebar">
  <nav>
    <button class="navbtn" data-page="catalog" title="Courses"><i>📚</i><span>Courses</span></button>
    <button class="navbtn" data-page="mylearning" title="My Learning"><i>🎒</i><span>My Learning</span></button>
    <button class="navbtn" data-page="gradebook" title="Gradebook"><i>🗂️</i><span>Gradebook</span></button>
    <button class="navbtn" data-page="stu-dashboard" title="Dashboard"><i>🏠</i><span>Dashboard</span></button>
    <button class="navbtn" data-page="admin" title="Admin"><i>🛠️</i><span>Admin</span></button>
    <button class="navbtn" data-page="profile" title="Profile"><i>👤</i><span>Profile</span></button>
    <button class="navbtn" data-page="settings" title="Settings"><i>⚙️</i><span>Settings</span></button>
    <button class="navbtn" data-page="livechat" title="Live Chat"><i>💬</i><span>Live Chat</span></button>
  </nav>
</aside>

<main id="main">
  <!-- Fullscreen Login Page (shown when signed-out) -->
  <section id="page-auth" class="page">
    <div id="authCard" class="card ol-modal">
      <div id="authLogo">🎓 OpenLearn</div>
      <form id="authLoginPage" class="authpane">
        <label>Email <input id="loginEmailPage" type="email" required></label>
        <label>Password <input id="loginPassPage" type="password" required></label>
        <div class="auth-actions"><button class="btn primary" id="doLoginPage" type="submit">Login</button></div>
        <div class="auth-links">
          <a href="#" id="pageLinkSignup">Sign up</a>
          <a href="#" id="pageLinkForgot">Forgot password</a>
        </div>
      </form>
      <form id="authSignupPage" class="authpane ol-hidden">
        <label>Email <input id="signupEmailPage" type="email" required></label>
        <label>Password <input id="signupPassPage" type="password" required></label>
        <div class="auth-actions"><button class="btn primary" id="doSignupPage" type="submit">Create account</button></div>
        <div class="auth-links"><a href="#" id="pageBackToLogin1">Back to login</a></div>
      </form>
      <form id="authForgotPage" class="authpane ol-hidden">
        <label>Email <input id="forgotEmailPage" type="email" required></label>
        <div class="auth-actions"><button class="btn" id="doForgotPage" type="submit">Send reset link</button></div>
        <div class="auth-links"><a href="#" id="pageBackToLogin2">Back to login</a></div>
      </form>
    </div>
  </section>

  <!-- Courses -->
  <section id="page-catalog" class="page active">
    <div class="row" style="margin-bottom:10px">
      <button class="btn" id="btn-add-samples">Add sample data</button>
      <button class="btn" id="btn-new-course">New Course</button>
    </div>
    <div id="catalog-grid" class="grid"></div>
  </section>

  <!-- My Learning -->
  <section id="page-mylearning" class="page">
    <div id="mylearn-grid" class="grid"></div>
    <div id="reader" class="card" data-course-id=""></div>
  </section>

  <!-- Gradebook -->
  <section id="page-gradebook" class="page">
    <h2>Gradebook</h2><div id="gradebook" class="card"></div>
  </section>

  <!-- Student Dashboard -->
  <section id="page-stu-dashboard" class="page">
    <h2>Dashboard</h2>
    <div id="adminDashComposer" class="card ol-hidden">
      <div class="row">
        <input id="dashTitle" placeholder="Announcement title" class="grow"/>
        <button class="btn primary" id="postDash">Post</button>
      </div>
      <textarea id="dashBody" placeholder="Write announcement..." style="width:100%;height:100px;margin-top:8px"></textarea>
    </div>
    <div id="stuDashPanel" class="card" style="margin-top:10px">No announcements yet.</div>
  </section>

  <!-- Admin -->
  <section id="page-admin" class="page">
    <h2>Admin · Courses</h2>
    <div class="card">
      <table class="ol-table" id="adminCourseTable">
        <thead><tr><th>ID</th><th>Title</th><th>Category</th><th>Level</th><th>Price</th><th>Rating</th><th>Hours</th><th></th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
  </section>

  <!-- Profile -->
  <section id="page-profile" class="page">
    <h2>Profile</h2><div id="profilePanel" class="card"></div>
  </section>

  <!-- Settings -->
  <section id="page-settings" class="page">
    <h2>Settings</h2>
    <div id="settingsPanel" class="card narrow">
      <div class="row">
        <label>Theme&nbsp;
          <select id="themeSel">
            <option value="dark">Dark</option>
            <option value="rose">Rose</option>
            <option value="amber">Amber</option>
            <option value="slate">Slate</option>
            <option value="emerald">Emerald</option>
            <option value="purple">Purple</option>
            <option value="orange">Orange</option>
            <option value="teal">Teal</option>
            <option value="indigo">Indigo</option>
            <option value="ocean">Ocean</option>
          </select>
        </label>
        <div class="grow"></div>
        <label>Font size&nbsp;
          <select id="fontSel">
            <option value="14px">Small</option>
            <option value="16px" selected>Base</option>
            <option value="18px">Comfortable</option>
            <option value="20px">Large</option>
            <option value="22px">Extra Large</option>
          </select>
        </label>
      </div>
      <p class="muted">Theme/Font ပြောင်းတာနဲ့ app တစ်ခုလုံး (sidebar/menu/login) လိုက်ပြောင်းမယ်။</p>
    </div>
  </section>

  <!-- Live Chat -->
  <section id="page-livechat" class="page">
    <h2>Live Chat</h2>
    <div id="chatPanel" class="card narrow">
      <div class="row">
        <label>Room&nbsp;
          <select id="chatRoomSel">
            <option value="general">#general</option>
            <option value="course">#course (current)</option>
            <option value="dm">DM (email)</option>
            <option value="ta">DM TA</option>
          </select>
        </label>
        <input id="chatTarget" placeholder="course-id or email (for DM/TA)" style="flex:1" />
      </div>
      <div id="chatlog" style="max-height:260px;overflow:auto;margin-top:8px"></div>
      <div class="row" style="margin-top:8px">
        <input id="chatmsg" placeholder="Type a message…" class="grow">
        <button class="btn" id="sendChat">Send</button>
      </div>
    </div>
  </section>

  <!-- Link Pages with Back -->
  <section id="page-contact" class="page">
    <div class="card narrow">
      <div class="backrow"><button class="btn" data-back>← Back</button><h2 class="h4">Contact</h2></div>
      <p>Need help? Reach out to us. This is a sample content block with headings & lists.</p>
      <ul><li>Email: contact@openlearn.local</li><li>Phone: +95-xxx-xxx</li><li>Office hours: 9am–6pm</li></ul>
    </div>
  </section>
  <section id="page-guide" class="page">
    <div class="card narrow">
      <div class="backrow"><button class="btn" data-back>← Back</button><h2 class="h4">Guide</h2></div>
      <p>How to enroll, learn, and get certificates. Chapters:</p>
      <ol><li>Find a course</li><li>Enroll (Free/Paid)</li><li>Learn & submit</li><li>Pass & download certificate</li></ol>
    </div>
  </section>
  <section id="page-privacy" class="page">
    <div class="card narrow">
      <div class="backrow"><button class="btn" data-back>← Back</button><h2 class="h4">Privacy</h2></div>
      <p>Your privacy matters. We store minimal metadata locally for demo purposes only.</p>
    </div>
  </section>
  <section id="page-policy" class="page">
    <div class="card narrow">
      <div class="backrow"><button class="btn" data-back>← Back</button><h2 class="h4">Policy</h2></div>
      <p>Honor code, refund policy, academic integrity, accessibility commitment.</p>
    </div>
  </section>

  <footer id="footer">
    <div class="row">
      <div class="grow">
        © OpenLearn · 
        <a href="#" data-link="contact">Contact</a> · 
        <a href="#" data-link="guide">Guide</a> · 
        <a href="#" data-link="privacy">Privacy</a> · 
        <a href="#" data-link="policy">Policy</a>
      </div>
      <div class="row" style="gap:10px">
        <a href="#" title="YouTube" aria-label="YouTube"><svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M23.5 6.2a3 3 0 0 0-2.1-2.1C19.7 3.5 12 3.5 12 3.5s-7.7 0-9.4.6A3 3 0 0 0 .5 6.2 31 31 0 0 0 0 12a31 31 0 0 0 .5 5.8 3 3 0 0 0 2.1 2.1c1.7.6 9.4.6 9.4.6s7.7 0 9.4-.6a3 3 0 0 0 2.1-2.1A31 31 0 0 0 24 12a31 31 0 0 0-.5-5.8ZM9.5 15.5v-7l6 3.5-6 3.5Z"/></svg></a>
        <a href="#" title="TikTok" aria-label="TikTok"><svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M21 8.3a7 7 0 0 1-4.9-2V16a6 6 0 1 1-6-6c.3 0 .7 0 1 .1V13a3 3 0 1 0 3 3V2h2a5 5 0 0 0 4 3.9V8.3Z"/></svg></a>
        <a href="#" title="Facebook" aria-label="Facebook"><svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M13 22v-9h3l1-4h-4V6a2 2 0 0 1 2-2h2V1h-3a5 5 0 0 0-5 5v3H6v4h3v9h4Z"/></svg></a>
        <a href="#" title="Instagram" aria-label="Instagram"><svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M12 7a5 5 0 1 0 0 10 5 5 0 0 0 0-10Zm8-1a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V6Zm-4 5a4 4 0 1 1-8 0 4 4 0 0 1 8 0Zm2-5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/></svg></a>
        <a href="#" title="Twitter/X" aria-label="Twitter"><svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M18 2h3l-7 8 8 12h-6l-5-7-5 7H0l8-10L1 2h6l4 6 7-6Z"/></svg></a>
      </div>
    </div>
  </footer>
</main>

<!-- Old modal kept (optional) -->
<dialog id="authModal" class="ol-modal card">
  <div id="authLogo">🎓 OpenLearn</div>
  <form id="authLogin" class="authpane" method="dialog">
    <label>Email <input id="loginEmail" type="email" required></label>
    <label>Password <input id="loginPass" type="password" required></label>
    <div class="auth-actions"><button class="btn primary" id="doLogin" type="submit">Login</button></div>
    <div class="auth-links"><a href="#" id="linkSignup">Sign up</a><a href="#" id="linkForgot">Forgot password</a></div>
  </form>
  <form id="authSignup" class="authpane ol-hidden" method="dialog">
    <label>Email <input id="signupEmail" type="email" required></label>
    <label>Password <input id="signupPass" type="password" required></label>
    <div class="auth-actions"><button class="btn primary" id="doSignup" type="submit">Create account</button></div>
    <div class="auth-links"><a href="#" id="backToLogin1">Back to login</a></div>
  </form>
  <form id="authForgot" class="authpane ol-hidden" method="dialog">
    <label>Email <input id="forgotEmail" type="email" required></label>
    <div class="auth-actions"><button class="btn" id="doForgot" type="submit">Send reset link</button></div>
    <div class="auth-links"><a href="#" id="backToLogin2">Back to login</a></div>
  </form>
</dialog>

<!-- New/Edit Course Modal -->
<dialog id="courseModal" class="ol-modal card">
  <div class="row" style="justify-content:space-between;align-items:center;margin-bottom:6px">
    <b id="courseModalTitle">New Course</b>
    <button class="btn small" id="courseClose" type="button">Close</button>
  </div>
  <form id="courseForm" class="authpane">
    <label>Title <input name="title" required></label>
    <label>Category <input name="category" value="General" required></label>
    <label>Level
      <select name="level"><option>Beginner</option><option>Intermediate</option><option>Advanced</option></select>
    </label>
    <label>Price (USD) <input name="price" type="number" step="0.01" value="0"></label>
    <label>Rating (0–5) <input name="rating" type="number" step="0.1" value="4.5"></label>
    <label>Hours <input name="hours" type="number" step="1" value="6"></label>
    <label>Credits <input name="credits" type="number" step="1" value="3"></label>
    <label>Image URL <input name="img" placeholder="auto if empty"></label>
    <label style="grid-column:1/-1">Description <textarea name="description" rows="3"></textarea></label>
    <input type="hidden" name="id">
    <div class="auth-actions">
      <button class="btn" type="button" id="courseCancel">Cancel</button>
      <button class="btn primary" type="submit" id="courseSave">Save</button>
    </div>
  </form>
</dialog>

<script type="module" src="/config.js"></script>
<script type="module" src="/firebase.js"></script>
<script type="module" src="/app.js"></script>
</body>
</html>