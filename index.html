<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>OpenLearn Pro v2</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <!-- Topbar with hamburger + auth -->
    <header class="topbar">
      <button id="hamburger" class="btn ghost">‚ò∞</button>
      <div class="brand">OpenLearn <span class="badge">v1</span></div>
      <div class="spacer"></div>
      <button id="toggleTheme" class="btn ghost">üåì</button>
      <button id="btnLogin" class="btn">Login</button>
      <button id="btnSignup" class="btn">Sign up</button>
      <div id="userMenu" class="user-menu hidden">
        <span id="userName"></span>
        <button id="btnLogout" class="btn ghost">Logout</button>
      </div>
    </header>

    <!-- NEW: v1-style Left Sidebar Layout -->
    <div class="layout">
      <aside id="sidebar" class="sidebar">
        <div class="side-head">
          <div class="logo">üìò</div>
          <div class="title">OpenLearn</div>
        </div>

        <nav class="side-nav">
          <button class="side-item active" data-page="catalog">
            üè† Catalog
          </button>
          <button class="side-item" data-page="mylearning">
            üìÇ My Learning
          </button>
          <div class="side-section">Admin</div>
          <button class="side-item admin-only hidden" data-page="admin">
            üõ†Ô∏è Dashboard
          </button>
          <button class="side-item admin-only hidden" data-page="analytics">
            üìä Analytics
          </button>
        </nav>

        <div class="side-footer">
          <small class="muted">¬© OpenLearn</small>
        </div>
      </aside>

      <main class="content">
        <!-- Catalog -->
        <section id="page-catalog" class="page visible">
          <div class="controls">
            <input id="searchInput" placeholder="Search courses‚Ä¶" />
            <select id="filterLevel">
              <option value="">All Levels</option>
              <option>Beginner</option>
              <option>Intermediate</option>
              <option>Advanced</option>
            </select>
            <select id="filterCategory">
              <option value="">All Categories</option>
            </select>
            <select id="sortBy">
              <option value="title-asc">Title ‚Üë</option>
              <option value="title-desc">Title ‚Üì</option>
              <option value="rating-desc">Rating ‚Üì</option>
              <option value="price-asc">Price ‚Üë</option>
              <option value="price-desc">Price ‚Üì</option>
            </select>
          </div>
          <div id="courseGrid" class="grid"></div>
          <div class="pager">
            <button id="pgPrev" class="btn">Prev</button>
            <span id="pgInfo" class="muted"></span>
            <button id="pgNext" class="btn">Next</button>
          </div>
        </section>

        <!-- Course detail -->
        <section id="page-course" class="page">
          <div id="courseHeader" class="course-header"></div>
          <div class="course-body">
            <aside class="syllabus">
              <h4>Syllabus</h4>
              <ol id="lessonList"></ol>
            </aside>
            <article id="lessonContent" class="lesson-content"></article>
            <aside class="course-tools">
              <div class="card">
                <h4>Progress</h4>
                <div id="progressBox" class="muted">-</div>
                <button id="btnMarkComplete" class="btn">
                  Mark lesson complete
                </button>
                <button id="btnCertificate" class="btn ghost">
                  Get Certificate
                </button>
              </div>
              <div class="card">
                <h4>Discussion</h4>
                <div id="comments"></div>
                <form id="formComment" class="stack">
                  <textarea
                    id="commentText"
                    placeholder="Write a comment‚Ä¶"
                    rows="2"
                  ></textarea>
                  <button class="btn">Post</button>
                </form>
              </div>
              <div class="card">
                <h4>Assignments</h4>
                <div id="assList"></div>
                <form id="formSubmitAss" class="stack">
                  <input id="assFile" type="file" />
                  <button class="btn">Submit file</button>
                </form>
              </div>
            </aside>
          </div>
        </section>

        <!-- My Learning -->
        <section id="page-mylearning" class="page">
          <h2>My Learning</h2>
          <div id="emptyMy" class="muted">You are not enrolled yet.</div>
          <div id="myCourses" class="grid"></div>
        </section>

        <!-- Admin -->
        <section id="page-admin" class="page">
          <div class="tabs">
            <button class="tab active" data-tab="courses">Courses</button>
            <button class="tab" data-tab="lessons">Lessons</button>
            <button class="tab" data-tab="quizzes">Quizzes</button>
            <button class="tab" data-tab="users">Users</button>
            <button class="tab" data-tab="assign">Assignments</button>
          </div>

          <div id="tab-courses" class="tabpane visible">
            <div class="row">
              <button id="btnNewCourse" class="btn">Ôºã New Course</button>
              <button id="btnSeed" class="btn ghost">Load Demo Data</button>
            </div>
            <table id="courseTable" class="table">
              <thead>
                <tr>
                  <th>Cover</th>
                  <th>Title</th>
                  <th>Category</th>
                  <th>Level</th>
                  <th>Price</th>
                  <th>Rating</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>

          <div id="tab-lessons" class="tabpane">
            <div class="row">
              <select id="lsCourseSelect"></select>
              <button id="btnNewLesson" class="btn">Ôºã New Lesson</button>
            </div>
            <table id="lessonTable" class="table">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Title</th>
                  <th>Type</th>
                  <th>Duration</th>
                  <th>Published</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>

          <div id="tab-quizzes" class="tabpane">
            <div class="row">
              <select id="qzCourseSelect"></select>
              <button id="btnNewQuiz" class="btn">Ôºã New Quiz</button>
            </div>
            <table id="quizTable" class="table">
              <thead>
                <tr>
                  <th>Title</th>
                  <th>#Q</th>
                  <th>Total</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>

          <div id="tab-users" class="tabpane">
            <table id="userTable" class="table">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Email</th>
                  <th>Role</th>
                  <th>Active</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
            <div class="pager">
              <button id="usrPrev" class="btn">Prev</button>
              <span id="usrInfo" class="muted"></span>
              <button id="usrNext" class="btn">Next</button>
            </div>
          </div>

          <div id="tab-assign" class="tabpane">
            <div class="row">
              <select id="asCourseSelect"></select>
              <button id="btnNewAss" class="btn">Ôºã New Assignment</button>
            </div>
            <table id="assTable" class="table">
              <thead>
                <tr>
                  <th>Title</th>
                  <th>Due</th>
                  <th>Max</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </section>

        <!-- Analytics -->
        <section id="page-analytics" class="page">
          <h2>Analytics</h2>
          <div class="grid2">
            <div class="card">
              <h4>Totals</h4>
              <div id="anTotals" class="muted">-</div>
            </div>
            <div class="card">
              <h4>Recent Signups</h4>
              <div id="anSignups" class="muted">-</div>
            </div>
          </div>
        </section>
      </main>
    </div>

    <!-- Dialogs -->
    <dialog id="dlgLogin">
      <form id="formLogin" method="dialog" class="stack">
        <h3>Login</h3>
        <input id="loginEmail" type="email" placeholder="Email" required />
        <input
          id="loginPassword"
          type="password"
          placeholder="Password"
          required
        />
        <button class="btn">Login</button>
        <div class="muted">Forgot? <a href="#" id="lnkForgot">Reset</a></div>
        <div class="muted">New? <a href="#" id="lnkToSignup">Sign up</a></div>
      </form>
    </dialog>

    <dialog id="dlgSignup">
      <form id="formSignup" method="dialog" class="stack">
        <h3>Sign up</h3>
        <input id="suName" placeholder="Full name" />
        <input id="suEmail" type="email" placeholder="Email" required />
        <input
          id="suPassword"
          type="password"
          placeholder="Password (6+)"
          required
        />
        <input id="suConfirm" type="password" placeholder="Confirm" required />
        <input id="suAdminKey" placeholder="Admin Access Key (optional)" />
        <button class="btn">Create account</button>
        <div class="muted">
          Have an account? <a href="#" id="lnkToLogin">Login</a>
        </div>
      </form>
    </dialog>

    <dialog id="dlgForgot">
      <form id="formForgot" method="dialog" class="stack">
        <h3>Reset password</h3>
        <input id="fpEmail" type="email" placeholder="Email" required />
        <button class="btn">Send reset email</button>
      </form>
    </dialog>

    <dialog id="dlgCourse">
      <form id="formCourse" method="dialog" class="stack">
        <h3 id="courseDlgTitle">New Course</h3>
        <input id="cId" type="hidden" />
        <input id="cTitle" placeholder="Title" required />
        <input id="cCategory" placeholder="Category" />
        <select id="cLevel">
          <option>Beginner</option>
          <option>Intermediate</option>
          <option>Advanced</option>
        </select>
        <div class="row">
          <input
            id="cPrice"
            type="number"
            step="0.01"
            placeholder="Price"
          /><input id="cRating" type="number" step="0.1" placeholder="Rating" />
        </div>
        <div class="row">
          <input id="cHours" type="number" step="1" placeholder="Hours" /><input
            id="cImage"
            type="file"
          />
        </div>
        <textarea id="cDesc" placeholder="Description"></textarea>
        <button class="btn">Save</button>
      </form>
    </dialog>

    <dialog id="dlgLesson">
      <form id="formLesson" method="dialog" class="stack">
        <h3 id="lessonDlgTitle">New Lesson</h3>
        <input id="lId" type="hidden" /><input id="lCourseId" type="hidden" />
        <input id="lTitle" placeholder="Title" required />
        <select id="lType">
          <option value="video">Video</option>
          <option value="article">Article</option>
        </select>
        <div class="row">
          <input
            id="lOrder"
            type="number"
            step="1"
            placeholder="# order"
          /><input
            id="lDuration"
            type="number"
            step="1"
            placeholder="Duration (mins)"
          />
        </div>
        <textarea
          id="lContent"
          placeholder="Article content (rich text allowed)"
        ></textarea>
        <div class="row">
          <input
            id="lVideoURL"
            placeholder="YouTube URL or uploaded URL"
          /><input id="lVideo" type="file" />
        </div>
        <label class="checkbox"
          ><input id="lPublished" type="checkbox" /> Published</label
        >
        <button class="btn">Save</button>
      </form>
    </dialog>

    <dialog id="dlgQuiz">
      <form id="formQuiz" method="dialog" class="stack">
        <h3 id="quizDlgTitle">New Quiz</h3>
        <input id="qId" type="hidden" /><input id="qCourseId" type="hidden" />
        <input id="qTitle" placeholder="Title" required />
        <div id="qQuestions"></div>
        <button id="btnAddQ" type="button" class="btn ghost">
          Ôºã Add question
        </button>
        <button class="btn">Save</button>
      </form>
    </dialog>

    <dialog id="dlgAss">
      <form id="formAss" method="dialog" class="stack">
        <h3 id="assDlgTitle">New Assignment</h3>
        <input id="aId" type="hidden" />
        <input id="aCourseId" type="hidden" />
        <input id="aTitle" placeholder="Title" required />
        <input id="aDue" type="date" required />
        <input
          id="aMax"
          type="number"
          step="1"
          placeholder="Max points"
          required
        />
        <textarea
          id="aDesc"
          placeholder="Instructions (markdown/plain)"
        ></textarea>
        <button class="btn">Save</button>
      </form>
    </dialog>

    <div id="toast"></div>
    <script type="module" src="./firebase.js"></script>
    <script type="module" src="./app.js"></script>
  </body>
</html>
